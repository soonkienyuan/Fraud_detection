def flatten_list(li):
    from functools import reduce
    return reduce(lambda acm,cur: acm + cur, li)

target = ['isFraud']

input_features = [['TransactionAmt', 'dist1', 'dist2']]

categorical_cols = ['card1', 'card2', 'card3', 'card4', 'card5', 'card6', 'M1', 'M2', 'M3', 'M4', 'M5', 'M6', 'M7', 'M8', 'M9', 'ProductCD', 'addr1']

time_features = ['D1', 'D2', 'D3', 'D4', 'D5', 'D6', 'D7', 'D8', 'D9', 'D10', 'D11', 'D12', 'D13', 'D14', 'D15']

count_feature_subset = [['C1', 'C2', 'C4', 'C6', 'C7', 'C8', 'C10', 'C11', 'C12'], ['C5', 'C9'], ['C14', 'C13'], ['C3']]

new_time_subsets = [['D5'], ['D3'], ['D11'], ['D4'], ['D2', 'D1'], ['D15'], ['D10']]

vesta_subset_grp = [['V281'], ['V282'], ['V283'], ['V289', 'V288'], ['V296'], ['V300', 'V301'], ['V315', 'V313', 'V314'], ['V1'], ['V10', 'V11'], ['V2'], ['V3'], ['V5', 'V4'], ['V6'], ['V7'], ['V8', 'V9'], ['V13', 'V12'], ['V14'], ['V15', 'V16', 'V17', 'V18', 'V21', 'V22', 'V31', 'V32', 'V33', 'V34'], ['V20', 'V19'], ['V23', 'V24'], ['V25', 'V26'], ['V28', 'V27'], ['V29', 'V30'], ['V36', 'V35'], ['V38', 'V37'], ['V39', 'V40', 'V42', 'V43'], ['V41'], ['V44', 'V45'], ['V46'], ['V47'], ['V48', 'V49'], ['V52', 'V50', 'V51'], ['V53', 'V54'], ['V55'], ['V56'], ['V61', 'V62'], ['V63', 'V71', 'V64', 'V73', 'V60', 'V72', 'V58', 'V59', 'V57'], ['V65'], ['V67', 'V66'], ['V68'], ['V70', 'V69'], ['V74'], ['V76', 'V75'], ['V77'], ['V78'], ['V79'], ['V80', 'V81', 'V84', 'V85', 'V92', 'V93', 'V94'], ['V82', 'V83'], ['V87', 'V86'], ['V88'], ['V89'], ['V90', 'V91'], ['V102', 'V132', 'V97', 'V133', 'V105', 'V126', 'V96', 'V95', 'V128', 'V134', 'V106', 'V101', 'V127', 'V103'], ['V104'], ['V107'], ['V108', 'V110'], ['V109'], ['V111'], ['V112', 'V113'], ['V114', 'V116'], ['V115'], ['V117', 'V119'], ['V118'], ['V120'], ['V121'], ['V122'], ['V124'], ['V125', 'V123'], ['V129'], ['V130'], ['V131'], ['V135'], ['V136', 'V137'], ['V98'], ['V99', 'V100'], ['V138'], ['V139', 'V140'], ['V141', 'V142'], ['V146', 'V147'], ['V156', 'V158', 'V148', 'V149', 'V153', 'V155', 'V154', 'V157'], ['V162', 'V161', 'V163'], ['V144', 'V145', 'V150', 'V151', 'V152', 'V159', 'V160'], ['V164', 'V143', 'V165'], ['V166'], ['V167', 'V168', 'V177', 'V178', 'V179', 'V182', 'V183', 'V202', 'V203', 'V204', 'V211', 'V212', 'V213'], ['V173'], ['V181'], ['V186', 'V172', 'V207', 'V176', 'V193', 'V196', 'V191', 'V190', 'V199'], ['V192', 'V187'], ['V205'], ['V206'], ['V216', 'V214', 'V215'], ['V169'], ['V170', 'V200'], ['V171'], ['V174'], ['V175'], ['V180'], ['V184', 'V185'], ['V189', 'V188', 'V201'], ['V194', 'V197'], ['V198', 'V195'], ['V208'], ['V209'], ['V210'], ['V223'], ['V226'], ['V230', 'V258'], ['V237', 'V236', 'V235'], ['V240'], ['V241'], ['V246', 'V257', 'V244', 'V228', 'V242'], ['V249', 'V243', 'V253', 'V248', 'V229', 'V247', 'V254'], ['V252'], ['V260'], ['V261', 'V262'], ['V264', 'V265'], ['V266', 'V269'], ['V267', 'V268', 'V225', 'V224'], ['V273', 'V232', 'V219', 'V217', 'V263', 'V274', 'V275', 'V233', 'V231', 'V218'], ['V277', 'V278', 'V276'], ['V220'], ['V234'], ['V238', 'V239'], ['V250', 'V251'], ['V259', 'V222', 'V221', 'V256', 'V245', 'V227', 'V255'], ['V272', 'V270', 'V271'], ['V280', 'V295', 'V297', 'V298', 'V299', 'V307', 'V308', 'V318'], ['V284'], ['V285', 'V287'], ['V286'], ['V290'], ['V291', 'V292'], ['V294', 'V306', 'V317', 'V279', 'V316', 'V293'], ['V303', 'V304', 'V302'], ['V305'], ['V310'], ['V311', 'V309'], ['V312'], ['V321', 'V319', 'V320'], ['V322', 'V323', 'V324', 'V327', 'V328', 'V329', 'V330', 'V331', 'V332', 'V333'], ['V325'], ['V326'], ['V334', 'V336'], ['V335'], ['V337'], ['V338', 'V339']]

vesta_subset_grp_pages = [[['V281'], ['V282'], ['V283'], ['V289', 'V288'], ['V296'], ['V300', 'V301'], ['V315', 'V313', 'V314']], [['V1'], ['V10', 'V11'], ['V2'], ['V3'], ['V5', 'V4'], ['V6'], ['V7'], ['V8', 'V9']], [['V13', 'V12'], ['V14'], ['V15', 'V16', 'V17', 'V18', 'V21', 'V22', 'V31', 'V32', 'V33', 'V34'], ['V20', 'V19'], ['V23', 'V24'], ['V25', 'V26'], ['V28', 'V27'], ['V29', 'V30']], [['V36', 'V35'], ['V38', 'V37'], ['V39', 'V40', 'V42', 'V43'], ['V41'], ['V44', 'V45'], ['V46'], ['V47'], ['V48', 'V49'], ['V52', 'V50', 'V51']], [['V53', 'V54'], ['V55'], ['V56'], ['V61', 'V62'], ['V63', 'V71', 'V64', 'V73', 'V60', 'V72', 'V58', 'V59', 'V57'], ['V65'], ['V67', 'V66'], ['V68'], ['V70', 'V69'], ['V74']], [['V76', 'V75'], ['V77'], ['V78'], ['V79'], ['V80', 'V81', 'V84', 'V85', 'V92', 'V93', 'V94'], ['V82', 'V83'], ['V87', 'V86'], ['V88'], ['V89'], ['V90', 'V91']], [['V102', 'V132', 'V97', 'V133', 'V105', 'V126', 'V96', 'V95', 'V128', 'V134', 'V106', 'V101', 'V127', 'V103'], ['V104'], ['V107'], ['V108', 'V110'], ['V109'], ['V111'], ['V112', 'V113'], ['V114', 'V116'], ['V115'], ['V117', 'V119'], ['V118'], ['V120'], ['V121'], ['V122'], ['V124'], ['V125', 'V123'], ['V129'], ['V130'], ['V131'], ['V135'], ['V136', 'V137'], ['V98'], ['V99', 'V100']], [['V138'], ['V139', 'V140'], ['V141', 'V142'], ['V146', 'V147'], ['V156', 'V158', 'V148', 'V149', 'V153', 'V155', 'V154', 'V157'], ['V162', 'V161', 'V163']], [['V144', 'V145', 'V150', 'V151', 'V152', 'V159', 'V160'], ['V164', 'V143', 'V165'], ['V166']], [['V167', 'V168', 'V177', 'V178', 'V179', 'V182', 'V183', 'V202', 'V203', 'V204', 'V211', 'V212', 'V213'], ['V173'], ['V181'], ['V186', 'V172', 'V207', 'V176', 'V193', 'V196', 'V191', 'V190', 'V199'], ['V192', 'V187'], ['V205'], ['V206'], ['V216', 'V214', 'V215']], [['V169'], ['V170', 'V200'], ['V171'], ['V174'], ['V175'], ['V180'], ['V184', 'V185'], ['V189', 'V188', 'V201'], ['V194', 'V197'], ['V198', 'V195'], ['V208'], ['V209'], ['V210']], [['V223'], ['V226'], ['V230', 'V258'], ['V237', 'V236', 'V235'], ['V240'], ['V241'], ['V246', 'V257', 'V244', 'V228', 'V242'], ['V249', 'V243', 'V253', 'V248', 'V229', 'V247', 'V254'], ['V252'], ['V260'], ['V261', 'V262'], ['V264', 'V265'], ['V266', 'V269'], ['V267', 'V268', 'V225', 'V224'], ['V273', 'V232', 'V219', 'V217', 'V263', 'V274', 'V275', 'V233', 'V231', 'V218'], ['V277', 'V278', 'V276']], [['V220'], ['V234'], ['V238', 'V239'], ['V250', 'V251'], ['V259', 'V222', 'V221', 'V256', 'V245', 'V227', 'V255'], ['V272', 'V270', 'V271']], [['V280', 'V295', 'V297', 'V298', 'V299', 'V307', 'V308', 'V318'], ['V284'], ['V285', 'V287'], ['V286'], ['V290'], ['V291', 'V292'], ['V294', 'V306', 'V317', 'V279', 'V316', 'V293'], ['V303', 'V304', 'V302'], ['V305'], ['V310'], ['V311', 'V309'], ['V312'], ['V321', 'V319', 'V320']], [['V322', 'V323', 'V324', 'V327', 'V328', 'V329', 'V330', 'V331', 'V332', 'V333'], ['V325'], ['V326'], ['V334', 'V336'], ['V335'], ['V337'], ['V338', 'V339']]]

vesta_subset_grp = flatten_list(vesta_subset_grp_pages)

vesta_columns = [f'V{i+1}' for i in range(339)]

input_features = []
input_features += ['TransactionAmt', 'dist1', 'dist2'] 
input_features += vesta_columns 
input_features += flatten_list(new_time_subsets) 
input_features += flatten_list(count_feature_subset) 
input_features += categorical_cols
